---
import { getCollection } from "astro:content";
import Sidebar from "./Sidebar.astro"
import settings from "../../helpers/settingsHelper";
const homepage = await getCollection('homepage') || [];
const pages = await getCollection('pages') || [];
console.log(settings)
const cleanedPages = [...homepage,...pages].map(page=>{
  if (page.collection==='homepage'){
return { url:'/',title: page.data.title||'Home', showInMenu:true}
  }
  else{
    
    return {url:'/'+page.slug+'/',title:page.data.title, showInMenu:(page.data.publishStatus==="published")}
  }
}).filter(page=>{return page.showInMenu});

const menuComponent = Sidebar 

---

<menuComponent items={cleanedPages} />